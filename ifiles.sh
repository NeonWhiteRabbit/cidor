#!/bin/bash

#List files 
ls -l -S /opt/cidor/temp/ > testdata.txt

#Clean them to be added to a new file with extra concatinated text 
cat testdata.txt | grep "index" | cut -d "i" -f 2 > to_conc.txt

#Go over each line and add text before it
#Clean it up and make into a shell script file
echo "#!/bin/bash" > conc_run.sh
File="to_conc.txt"
Lines=$(cat $File)
for Line in $Lines
do
echo "file /opt/cidor/temp/i$Line" >> conc_done.txt
done

cat conc_done.txt | uniq -u > conc_run.sh
chmod 777 conc_run.sh

#Run shellscript file, show results
./conc_run.sh > conc_sort.txt
 
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"
echo "==== R ====================================================================="
echo "==== E ====================================================================="
echo "==== S ====================================================================="
echo "==== U ====================================================================="
echo "==== L ====================================================================="
echo "==== T ====================================================================="
echo "==== S ====================================================================="
echo "============================================================================"
echo "================== I N T E R E S T I N G      F I L E S ===================="
echo "============================================================================"
echo "==================  ..:: Microsoft Files Found:  :: .. ====================="
echo "============================================================================"
echo "============================================================================"
cat conc_sort.txt | grep "Microsoft" > microsoft.txt
awk '!a[$0]++' microsoft.txt
echo "============================================================================"
echo "============================================================================"
echo "====================== .. :: PDF Files Found:  :: .. ======================="
echo "============================================================================"
echo "============================================================================"
cat conc_sort.txt | grep "PDF" > pdf.txt
awk '!a[$0]++' pdf.txt
echo "============================================================================"
echo "============================================================================"
echo "============================================================================"

./updated.sh


